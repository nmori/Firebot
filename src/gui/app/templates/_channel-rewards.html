<firebot-item-table
  items="channelRewardsService.channelRewards"
  on-items-update="onRewardsUpdated(items)"
  headers="headers"
  sort-tag-context="channel rewards"
  orderable="true"
  add-new-button-disabled="channelRewardsService.channelRewards.length >= 50"
  add-new-button-text="新しいチャンネル報酬"
  on-add-new-clicked="channelRewardsService.showAddOrEditRewardModal()"
  context-menu-options="rewardMenuOptions(item)"
  no-data-message="チャンネル報酬はまだ作成されていません"
  none-found-message="チャンネル報酬はみつかりません"
  search-placeholder="報酬を検索"
  test-button="true"
  on-test-button-clicked="channelRewardsService.manuallyTriggerReward(itemId)"
  status-field="twitchData.isEnabled"
>
  <fb-item-table-toolbar>
    <button
      class="btn btn-default"
      uib-tooltip="Twitchと同期"
      ng-click="channelRewardsService.syncChannelRewards()"
    >
      <i class="fas fa-sync"></i>
    </button>
  </fb-item-table-toolbar>
  <fb-item-table-footer>
    <div class="p-6" style="display: flex; align-items: center">
      <div style="flex-shrink: 0; display: flex; align-items: center">
        <span
          >Reward Limit
          <tooltip text="'Twitchはチャンネル報酬を合計50チャンネルに制限しています'"
        /></span>
        <span class="my-0 mx-4" style="font-size: 20px;">
          {{channelRewardsService.channelRewards.length}} / 50
        </span>
      </div>
      <div style="width: 100%">
        <div
          style="
            width: 100%;
            background: #24262a;
            height: 8px;
            border-radius: 8px;
            overflow: hidden;
          "
        >
          <div
            style="height: 100%; background: #2aa2c0"
            ng-style="{ width: ((channelRewardsService.channelRewards.length / 50) * 100) + '%' }"
          ></div>
        </div>
      </div>
    </div>
  </fb-item-table-footer>
</firebot-item-table>
